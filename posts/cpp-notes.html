<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C++ 学习笔记 - Modern C++</title>
    
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../lib/prism.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-vs.min.css" rel="stylesheet" />

    <style>
        .page-body {
            max-width: 900px;
            margin: 0 auto;
            padding: 1rem 1rem 2.5rem 1rem;
            background: #fff;
            border-radius: 4px;
        }
        pre[class*="language-"] {
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            margin: 1.5em 0;
        }
        blockquote { border-left: 3px solid #37352f; padding-left: 1em; margin: 1em 0; color: #666; }
        ul, ol { margin-left: 1.5em; margin-bottom: 1em; }
        .page-title { font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; }
        h3 { margin-top: 2rem; border-bottom: 1px solid #eee; padding-bottom: 0.5rem; }
        h4 { margin-top: 1.5rem; color: #2c3e50; }
        /* code { background: rgba(135, 131, 120, 0.15); padding: 0.2em 0.4em; border-radius: 3px; font-size: 85%; } */
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <div class="nav-brand">
                    <a href="../index.html" class="brand-link">sailorclou</a>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item"><a href="../index.html" class="nav-link">Home</a></li>
                    <li class="nav-item"><a href="../about.html" class="nav-link">About</a></li>
                    <li class="nav-item"><a href="../contact.html" class="nav-link">Contact</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="main">
        <div class="container">
            <div class="layout">
                <aside class="sidebar" id="toc-sidebar" aria-label="文章目录">
                    <div class="sidebar-content">
                        <h3 class="sidebar-title" style="border:none;">目录</h3>
                        <nav id="toc" aria-label="Table of contents"></nav>
                    </div>
                </aside>

                <div class="main-content">
                    <article class="post-card" style="border:none; box-shadow:none;">
                        <header>
                            <div class="post-meta">
                                <time class="post-date">January 17, 2026</time>
                                <span class="post-category">C++</span>
                            </div>
                            <h1 class="page-title">Notes for Modern C++</h1>
                        </header>
                        
                        <div class="page-body">
                            <h3>1.1 准备知识</h3>
                            <h4>1.1.1 被弃用的特性</h4>
                            <p>从 C++11 开始，被弃用/更改的主要特性：</p>
                            <ul>
                                <li>不允许将字符串常量赋值给一个 <code>char *</code>，初始化应使用 <code>const char *</code> 或 <code>auto</code>。</li>
                            </ul>
                            <pre><code class="language-cpp">char *str = "hello world!"; // 将出现弃用警告</code></pre>
                            <ul>
                                <li>异常处理应使用 <code>noexcept</code>。</li>
                                <li>C 语言风格的类型转换被弃用，应使用 <code>static_cast</code>、<code>reinterpret_cast</code>、<code>const_cast</code>。</li>
                            </ul>

                            <h4>1.1.2 与 C 的兼容性</h4>
                            <p>编写 C++ 时应避免 <code>void*</code> 风格。必须使用 C 时，使用 <code>extern "C"</code> 分离编译：</p>
                            <pre><code class="language-cpp">
// foo.h
#ifdef __cplusplus
extern "C" {
#endif
int add(int x, int y);
#ifdef __cplusplus
}
#endif

// 1.1.cpp 链接示例
int main() {
    [out = std::ref(std::cout << "Result from C code: " << add(1, 2))](){
        out.get() << ".\n";
    }();
    return 0;
}</code></pre>

                            <h3>1.2 语言可用性的强化</h3>
                            <p>语言可用性发生在运行之前，涉及编写代码或编译器编译时的行为。</p>

                            <h4>1.2.1 常量</h4>
                            <p><strong>nullptr</strong>：取代 <code>NULL</code>。C++ 不允许 <code>void *</code> 隐式转换。<code>nullptr</code> 类型为 <code>nullptr_t</code>，可隐式转换为任何指针类型。</p>
                            
                            <p><strong>constexpr</strong>：将常量表达式在编译时优化，提升性能。支持递归（C++11）及局部变量、循环（C++14）。</p>
                            <pre><code class="language-cpp">
constexpr int len_foo_constexpr() { return 5; }
constexpr int fibonacci(const int n) {
    return n == 1 || n == 2 ? 1 : fibonacci(n-1) + fibonacci(n-2);
}

int main() {
    constexpr int len_2_constexpr = 1 + 2 + 3;
    char arr_4[len_2_constexpr];         // 合法
    char arr_6[len_foo_constexpr() + 1]; // 合法
}</code></pre>

                            <h4>1.2.2 变量及其初始化</h4>
                            <ul>
                                <li><strong>if/switch 变量声明</strong>：C++17 起允许在判断语句中直接定义变量。</li>
                                <li><strong>初始化列表</strong>：使用 <code>std::initializer_list</code>，使构造函数支持 <code>{}</code> 语法。</li>
                                <li><strong>结构化绑定</strong>：C++17 使用 <code>auto</code> 简化元组 <code>tuple</code> 或结构体的解构。</li>
                            </ul>

                            <h4>1.2.3 类型推导</h4>
                            <p><strong>auto</strong>：C++14 起可用于 lambda 参数，C++20 扩展至普通函数。注意不能推导数组类型。</p>
                            <p><strong>decltype</strong>：用于推导表达式类型。</p>
                            <pre><code class="language-cpp">
decltype(x + y) z; // z 的类型与 x+y 结果一致
if (std::is_same&lt;decltype(x), int&gt;::value) // 判断类型</code></pre>
                            <p><strong>尾返回类型推导</strong>：</p>
                            <pre><code class="language-cpp">
// C++11
template&lt;typename T, typename U&gt;
auto add(T x, U y) -> decltype(x + y);</code></pre>

                            <h4>1.2.4 控制流</h4>
                            <p><strong>if constexpr</strong>：在编译阶段完成分支判断。</p>
                            <pre><code class="language-cpp">
template&lt;typename T&gt;
auto print_type_info(const T& t) {
    if constexpr (std::is_integral&lt;T&gt;::value) {
        return t + 1;
    } else {
        return t + 0.001;
    }
}</code></pre>
                            <p><strong>区间 for 迭代</strong>：C++11 引入简洁的范围遍历。</p>
                            <pre><code class="language-cpp">for (auto element : vec) std::cout << element << std::endl;</code></pre>

                            <h4>1.2.5 模板</h4>
                            <p>现代 C++ 倾向于将计算移至编译期，大幅优化运行性能。</p>

                            <h4>1.2.6 面向对象</h4>
                            <ul>
                                <li><strong>委托构造</strong>：同一个类中构造函数相互调用。</li>
                                <li><strong>继承构造</strong>：使用 <code>using Base::Base</code> 引入基类构造函数。</li>
                                <li><strong>显式虚函数重载</strong>：使用 <code>override</code> 确保正确重载，<code>final</code> 防止类被继承或虚函数被进一步重载。</li>
                                <li><strong>强类型枚举</strong>：<code>enum class</code> 实现了类型安全，不隐式转换为整数。</li>
                            </ul>
                            <pre><code class="language-cpp">
class Magic {
public:
    Magic() = default; // 使用默认构造
    Magic& operator=(const Magic&) = delete; // 禁用赋值
};

enum class NewEnum : unsigned int {
    value1, value2
};</code></pre>

                            <h3>2 内存管理</h3>
                            <p>（此处内容待补充）</p>

                        </div>

                        <div class="post-footer">
                            <a href="../index.html" class="read-more">← 返回首页</a>
                        </div>
                    </article>
                </div> </div> </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p class="footer-text">&copy; 2026 SailorClou. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://fastly.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/prismjs@1.29.0/components/prism-c.min.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/prismjs@1.29.0/components/prism-cpp.min.js"></script>
    <script src="https://fastly.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <script src="../script.js"></script>
</body>
</html>